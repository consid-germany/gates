"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ElasticsearchAccessPolicy=void 0;var iam=()=>{var tmp=require("../../aws-iam");return iam=()=>tmp,tmp},cdk=()=>{var tmp=require("../../core");return cdk=()=>tmp,tmp},cr=()=>{var tmp=require("../../custom-resources");return cr=()=>tmp,tmp};class ElasticsearchAccessPolicy extends cr().AwsCustomResource{constructor(scope,id,props){super(scope,id,{resourceType:"Custom::ElasticsearchAccessPolicy",installLatestAwsSdk:!1,onUpdate:{action:"updateElasticsearchDomainConfig",service:"ES",parameters:{DomainName:props.domainName,AccessPolicies:cdk().Lazy.string({produce:()=>JSON.stringify(new(iam()).PolicyDocument({statements:this.accessPolicyStatements}).toJSON())})},outputPaths:["DomainConfig.ElasticsearchClusterConfig.AccessPolicies"],physicalResourceId:cr().PhysicalResourceId.of(`${props.domainName}AccessPolicy`)},policy:cr().AwsCustomResourcePolicy.fromSdkCalls({resources:[props.domainArn]})}),this.accessPolicyStatements=[],this.addAccessPolicies(...props.accessPolicies)}addAccessPolicies(...accessPolicyStatements){this.accessPolicyStatements.push(...accessPolicyStatements)}}exports.ElasticsearchAccessPolicy=ElasticsearchAccessPolicy;
