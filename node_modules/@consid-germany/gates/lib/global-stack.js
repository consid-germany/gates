"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_cdk_lib_1 = require("aws-cdk-lib");
const GLOBAL_REGION = "us-east-1";
const GLOBAL_STACK_ID = "Global";
class GlobalStackProvider {
    static getOrCreate(scope, props) {
        const stack = aws_cdk_lib_1.Stack.of(scope);
        let globalStack = scope.node.tryFindChild(GLOBAL_STACK_ID);
        if (!globalStack) {
            globalStack = new aws_cdk_lib_1.Stack(scope, GLOBAL_STACK_ID, {
                ...props,
                env: {
                    region: GLOBAL_REGION,
                    account: stack.account,
                },
            });
            stack.addDependency(globalStack);
        }
        return globalStack;
    }
}
exports.default = GlobalStackProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFsLXN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2dsb2JhbC1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFnRDtBQUdoRCxNQUFNLGFBQWEsR0FBRyxXQUFXLENBQUM7QUFDbEMsTUFBTSxlQUFlLEdBQUcsUUFBUSxDQUFDO0FBRWpDLE1BQXFCLG1CQUFtQjtJQUNwQyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQWlCLEVBQUUsS0FBa0I7UUFDcEQsTUFBTSxLQUFLLEdBQUcsbUJBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUIsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFVLENBQUM7UUFDcEUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ2YsV0FBVyxHQUFHLElBQUksbUJBQUssQ0FBQyxLQUFLLEVBQUUsZUFBZSxFQUFFO2dCQUM1QyxHQUFHLEtBQUs7Z0JBQ1IsR0FBRyxFQUFFO29CQUNELE1BQU0sRUFBRSxhQUFhO29CQUNyQixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87aUJBQ3pCO2FBQ0osQ0FBQyxDQUFDO1lBQ0gsS0FBSyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBQ0QsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztDQUNKO0FBaEJELHNDQWdCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YWNrLCBTdGFja1Byb3BzIH0gZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgeyBJQ29uc3RydWN0IH0gZnJvbSBcImNvbnN0cnVjdHNcIjtcblxuY29uc3QgR0xPQkFMX1JFR0lPTiA9IFwidXMtZWFzdC0xXCI7XG5jb25zdCBHTE9CQUxfU1RBQ0tfSUQgPSBcIkdsb2JhbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHbG9iYWxTdGFja1Byb3ZpZGVyIHtcbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUoc2NvcGU6IElDb25zdHJ1Y3QsIHByb3BzPzogU3RhY2tQcm9wcyk6IFN0YWNrIHtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBTdGFjay5vZihzY29wZSk7XG4gICAgICAgIGxldCBnbG9iYWxTdGFjayA9IHNjb3BlLm5vZGUudHJ5RmluZENoaWxkKEdMT0JBTF9TVEFDS19JRCkgYXMgU3RhY2s7XG4gICAgICAgIGlmICghZ2xvYmFsU3RhY2spIHtcbiAgICAgICAgICAgIGdsb2JhbFN0YWNrID0gbmV3IFN0YWNrKHNjb3BlLCBHTE9CQUxfU1RBQ0tfSUQsIHtcbiAgICAgICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBHTE9CQUxfUkVHSU9OLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBzdGFjay5hY2NvdW50LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YWNrLmFkZERlcGVuZGVuY3koZ2xvYmFsU3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbG9iYWxTdGFjaztcbiAgICB9XG59XG4iXX0=